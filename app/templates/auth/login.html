{% extends 'base.html' %}

{% block title %}Login - MindNest{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-sm-10 col-md-8 col-lg-5">
    <div class="card shadow-sm mt-5">
      <div class="card-body">
        <h3 class="card-title mb-3 text-center">Welcome back</h3>
        <p class="text-center text-muted mb-4">Sign in to continue to your journal</p>

        <!-- Flash messages area -->
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <div class="mb-3">
              {% for msg in messages %}
                <div class="alert alert-info py-2">{{ msg }}</div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <!-- Local login form (optional) -->
        <form method="post" action="{{ url_for('journal.index') }}">
          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email" name="email" placeholder="you@example.com">
          </div>
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input type="password" class="form-control" id="password" name="password" placeholder="••••••">
          </div>
          <div class="d-grid gap-2 mb-3">
            <button class="btn btn-primary" id="signIn">Sign in</button>
          </div>
        </form>

        <div class="text-center text-muted mb-3">or</div>

        <!-- GitHub auth button -->
        <div class="d-grid">
          <a href="{{ url_for('auth.github_login') }}" class="btn btn-dark btn-lg d-flex align-items-center justify-content-center">
            <!-- GitHub mark (inline SVG) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="me-2">
              <path d="M12 .5C5.73.5.75 5.48.75 11.75c0 4.98 3.29 9.2 7.86 10.68.58.10.79-.25.79-.56 0-.28-.01-1.02-.02-2-3.2.7-3.88-1.54-3.88-1.54-.53-1.34-1.3-1.7-1.3-1.7-1.06-.72.08-.7.08-.7 1.17.08 1.79 1.2 1.79 1.2 1.04 1.78 2.73 1.27 3.4.97.11-.75.41-1.27.75-1.56-2.56-.29-5.26-1.28-5.26-5.72 0-1.26.45-2.29 1.19-3.1-.12-.3-.52-1.52.11-3.17 0 0 .97-.31 3.18 1.18a11.04 11.04 0 0 1 2.9-.39c.98 0 1.97.13 2.9.39 2.2-1.5 3.17-1.18 3.17-1.18.63 1.65.23 2.87.11 3.17.74.81 1.19 1.84 1.19 3.1 0 4.45-2.71 5.42-5.29 5.71.42.36.8 1.09.8 2.2 0 1.58-.01 2.86-.01 3.25 0 .31.21.67.8.56 4.57-1.49 7.85-5.7 7.85-10.68C23.25 5.48 18.27.5 12 .5z"/>
            </svg>
            Sign in with GitHub
          </a>
        </div>

        <p class="mt-3 mb-0 text-muted small text-center">Need an account? Contact the site admin.</p>
      </div>
    </div>
  </div>
</div>
<script src="{{ url_for('static', filename='js/auth.js') }}"></script>
{% endblock %}
